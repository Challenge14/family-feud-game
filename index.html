<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„ÙØµÙˆÙ„ (Family Feud Style)</title>
    
    <style>
        /* ========================================================= */
        /* 1. Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† */
        /* ========================================================= */
        :root {
            --primary-blue: #00004d;
            --accent-gold: #ffcc00;
            --light-grey: #e0e0e0;
            --text-dark: #333333;
            --error-red: #cc0000;
            --bg-gradient-start: #1a2a6c;
            --bg-gradient-end: #000022;
            --team-red: #d80000;
            --team-blue: #007bff;
            --secondary-green: #28a745;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            color: var(--light-grey);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            direction: rtl;
            padding: 20px;
            position: relative;
            overflow: hidden; 
        }

        .screen {
            text-align: center;
            padding: 40px;
            background: var(--light-grey);
            color: var(--text-dark);
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
            width: 95%;
            max-width: 1100px;
            border: 6px solid var(--accent-gold);
            animation: fadeIn 1s ease-out;
            position: absolute; 
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            height: auto;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hidden {
            display: none !important;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        h1 {
            color: var(--primary-blue);
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 1.6em;
            color: var(--text-dark);
            margin-bottom: 25px;
            font-weight: bold;
        }

        .main-btn {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: 4px solid var(--primary-blue);
            padding: 18px 35px;
            font-size: 1.4em;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: bold;
            margin: 25px 15px;
            box-shadow: 0 6px var(--primary-blue);
        }
        .main-btn:hover:not([disabled]) {
            background-color: var(--primary-blue);
            color: var(--accent-gold);
            transform: translateY(3px) scale(1.03);
            box-shadow: 0 3px var(--primary-blue);
        }
        .main-btn[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
        }


        /* ========================================================= */
        /* Ø´Ø§Ø´Ø© Ø§Ù„ÙØ§ØµÙ„ (Intermission Screen) */
        /* ========================================================= */
        #intermission-screen {
            background: var(--primary-blue);
            color: white;
            border: 6px solid var(--accent-gold);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            padding: 60px;
        }
        #intermission-screen h1 {
            color: var(--accent-gold);
            font-size: 4em;
            text-shadow: 4px 4px 6px rgba(0,0,0,0.6);
        }
        .intermission-scores h2 {
            font-size: 2.5em;
            margin: 10px 0;
            border-bottom: 3px solid var(--accent-gold);
            padding-bottom: 10px;
            color: white;
        }
        #next-round-btn {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
            border: 4px solid var(--primary-blue);
        }

        
        /* ========================================================= */
        /* Ø´Ø§Ø´Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ÙƒØ¨ÙŠØ±Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
        /* ========================================================= */
        #strike-flash-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: flex; 
            justify-content: center;
            align-items: center;
            color: white;
            /* Ø­Ø¬Ù… Ø®Ø· ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ ÙŠØºØ·ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© */
            font-size: min(60vw, 60vh); 
            font-weight: 900;
            /* ØªØ£Ø«ÙŠØ± Ø¸Ù„ Ø£Ø­Ù…Ø± Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙˆÙ‡Ø¬ */
            text-shadow: 0 0 20px var(--error-red), 0 0 50px var(--error-red), 0 0 10px black; 
            white-space: nowrap; 
            transform: scale(1.0); 
            opacity: 0; 
            transition: opacity 0.1s ease-in; 
        }

        /* ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¯Ø© Ø§Ù„Ø£Ù†ÙŠÙ…Ø§ÙŠØ´Ù† Ø¥Ù„Ù‰ 0.5s Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
        @keyframes strikeFlash {
            0% { opacity: 0; transform: scale(1.0) rotate(0deg); }
            20% { opacity: 0.8; transform: scale(1.08) rotate(-1deg); } 
            50% { opacity: 1; transform: scale(1.15) rotate(1deg); } 
            100% { opacity: 0; transform: scale(1.1); } 
        }
        
        .score-teams-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
        }
        .team-score-box {
            flex-grow: 1;
            padding: 15px 20px;
            border-radius: 10px;
            border: 3px solid var(--accent-gold);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            position: relative;
        }
        #team-red-box {
            background-color: var(--team-red);
            color: white;
        }
        #team-blue-box {
            background-color: var(--team-blue);
            color: white;
        }
        /* Ù…Ø¤Ø´Ø± Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ */
        .team-score-box.active-turn::after {
            content: 'â®';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 3em;
            color: var(--accent-gold);
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.9);
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        .game-controls {
            background: var(--primary-blue);
            color: var(--accent-gold);
            padding: 15px 20px;
            border-radius: 10px;
            border: 3px solid var(--accent-gold);
            margin-bottom: 30px;
        }
        
        /* Ø¥Ø®ÙØ§Ø¡ Ø®Ø§Ù†Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ */
        .question-container {
            visibility: hidden;
            height: 0;
            padding: 0;
            margin: 0;
        }

        .answers-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 12px;
            margin: 30px 0;
            padding: 15px;
            background: var(--light-grey);
            border-radius: 10px;
            border: 2px solid var(--primary-blue);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.2);
            flex-grow: 1;
        }

        .answer-slot {
            background-color: var(--primary-blue);
            color: var(--accent-gold);
            padding: 15px 20px;
            border-radius: 10px;
            border: 3px solid var(--accent-gold);
            height: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.4em;
            font-weight: 900;
            position: relative;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        
        .cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--primary-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 8px;
            z-index: 10;
        }
        .cover .answer-number {
            color: var(--accent-gold);
            font-size: 2.5em;
            font-weight: 900;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            border-bottom: 5px solid var(--accent-gold);
            padding-bottom: 5px;
        }
        .answer-slot.revealed .cover {
            transform: scaleX(0);
            opacity: 0;
        }
        .answer-slot > span {
            opacity: 0;
            transition: opacity 0.4s 0.1s;
            color: var(--accent-gold);
        }
        .answer-slot.revealed > span {
            opacity: 1;
        }
        
        #strikes-display {
            visibility: hidden;
            height: 0;
            margin: 0;
        }

        /* ========================================================= */
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø³Ø±Ù‚Ø© (Steal Panel) - ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­ØªÙˆØ§Ù‡Ø§ ÙÙŠ HTML */
        /* ========================================================= */
        .steal-panel {
            background: var(--primary-blue);
            color: white;
            padding: 20px;
            border-radius: 10px;
            border: 4px solid var(--error-red);
            margin-top: 20px;
        }
        .steal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .steal-buttons button {
            background-color: var(--error-red); /* Ø²Ø± Ø§Ù„Ø®Ø·Ø£ */
            border: 2px solid white;
        }

        /* ========================================================= */
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¯Ø¦ */
        /* ========================================================= */
        #select-start-team-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        #select-start-team-buttons .team-start-btn {
            padding: 20px 40px;
            font-size: 1.5em;
            color: white;
            border: 3px solid var(--accent-gold);
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px var(--primary-blue);
        }
        #start-red-btn {
            background-color: var(--team-red);
        }
        #start-blue-btn {
            background-color: var(--team-blue);
        }
        #start-red-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px var(--primary-blue);
        }
        #start-blue-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px var(--primary-blue);
        }
        
        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 600px) {
            .screen { padding: 15px; }
            h1 { font-size: 2.2em; }
            .team-score-box h2 { font-size: 1.1em; }
            .team-score-box .score-value { font-size: 2em; }
            .answers-board { grid-template-columns: 1fr; gap: 8px; }
            .strike-btn, #reveal-all-btn, .team-start-btn { width: 80%; margin: 5px 0; padding: 15px 30px; font-size: 1.5em; }
            #select-start-team-buttons { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

    <div id="strike-flash-container" class="hidden"></div>
    
    <div id="start-screen" class="screen">
        <h1>ØªØ­Ø¯ÙŠ Ø§Ù„ÙØµÙˆÙ„</h1>
        <p class="subtitle">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨ÙŠÙ† ÙØ±ÙŠÙ‚ÙŠÙ† - 5 Ø¬ÙˆÙ„Ø§Øª</p>
        <button id="start-game-btn" class="main-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <div id="game-screen" class="screen hidden">
        
        <div class="score-teams-container">
            <div id="team-red-box" class="team-score-box">
                <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±</h2>
                <span id="score-red" class="score-value">0</span>
            </div>
            <div id="team-blue-box" class="team-score-box">
                <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚</h2>
                <span id="score-blue" class="score-value">0</span>
            </div>
        </div>

        <div class="game-controls">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span id="current-round-score">0</span></h3>
                <div id="strikes-display" class="strikes"></div>
            </div>
            
            <div id="steal-panel" class="steal-panel hidden">
                <h3>ÙØ±ØµØ© Ø§Ù„Ø³Ø±Ù‚Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ <span id="stealing-team-name"></span> Ø¹Ù„ÙŠÙ‡ Ø¥Ø¹Ø·Ø§Ø¡ Ø¥Ø¬Ø§Ø¨Ø©</h3>
                <div class="steal-buttons" style="display: flex; justify-content: center; align-items: center; gap: 15px;">
                    <p style="font-size: 1.2em; margin: 0;">Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ù…Ù† Ø§Ù„Ù„ÙˆØ­Ø© Ø£Ùˆ Ø§Ø¶ØºØ·:</p>
                    <button id="steal-fail-btn" class="main-btn" style="background-color: var(--error-red);">Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© (Ø®Ø·Ø£)</button>
                </div>
            </div>

            <div id="select-start-team-buttons" class="hidden">
                <button id="start-red-btn" class="team-start-btn">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±</button>
                <button id="start-blue-btn" class="team-start-btn">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚</button>
            </div>
        </div>

        <div class="question-container">
            <h1 id="question-text"></h1>
        </div>
        
        <div id="answers-board" class="answers-board">
            </div>

        <div class="control-buttons">
            <button id="next-strike-btn" class="main-btn strike-btn hidden">Ø®Ø·Ø£ (X)</button>
            <button id="reveal-all-btn" class="main-btn hidden">ÙƒØ´Ù Ø§Ù„ÙƒÙ„</button>
            <button id="next-question-btn" class="main-btn next-btn hidden">Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
    </div>
    
    <div id="intermission-screen" class="screen hidden">
        <h1>Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</h1>
        <p class="subtitle">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… <span id="next-q-number"></span> Ù‚Ø§Ø¯Ù…!</p>
        <div class="intermission-scores">
            <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h2>
            <p>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±: <span id="int-score-red">0</span> Ù†Ù‚Ø·Ø©</p>
            <p>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚: <span id="int-score-blue">0</span> Ù†Ù‚Ø·Ø©</p>
        </div>
        <button id="next-round-btn" class="main-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <div id="end-screen" class="screen hidden">
        <h1 id="end-message"></h1>
        <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± <span id="final-score-red">0</span> | Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚ <span id="final-score-blue">0</span></h2>
        <button id="restart-game-btn" class="main-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>

    
    <script>
        
        // =========================================================
        // 5. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªÙ… ØªØ«Ø¨ÙŠØªÙ‡Ø§ Ø¹Ù„Ù‰ 5 Ø£Ø³Ø¦Ù„Ø©)
        // =========================================================
        const questionsData = [
            {
              "id": 1,
              "question": "Ø´ÙŠØ¡ ÙŠÙØ¹Ù„Ù‡ Ø§Ù„Ù†Ø§Ø³ Ù‚Ø¨Ù„ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù†ÙˆÙ…ØŸ",
              "answers": [
                {"text": "ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø³Ù†Ø§Ù†", "points": 35, "isRevealed": false},
                {"text": "ØªÙÙ‚Ø¯ Ø§Ù„Ù‡Ø§ØªÙ/Ø§Ù„ØªØµÙØ­", "points": 25, "isRevealed": false},
                {"text": "ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù„Ø§Ø¨Ø³/Ø§Ù„Ø¨ÙŠØ¬Ø§Ù…Ø§", "points": 15, "isRevealed": false},
                {"text": "Ø¶Ø¨Ø· Ø§Ù„Ù…Ù†Ø¨Ù‡", "points": 10, "isRevealed": false},
                {"text": "Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡", "points": 7, "isRevealed": false},
                {"text": "Ù‚Ø±Ø§Ø¡Ø© ÙƒØªØ§Ø¨", "points": 8, "isRevealed": false}
              ]
            },
            {
              "id": 2,
              "question": "Ù…Ù‡Ù†Ø© ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† ÙÙŠÙ‡Ø§ Ù„Ø¯ÙŠÙ‡Ù… Ø£ÙƒØ«Ø± Ø¥Ø¬Ø§Ø²Ø§ØªØŸ",
              "answers": [
                {"text": "Ø§Ù„Ù…Ø¹Ù„Ù…/Ø§Ù„Ù…Ø¯Ø±Ø³", "points": 40, "isRevealed": false},
                {"text": "Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ", "points": 25, "isRevealed": false},
                {"text": "Ø§Ù„Ø·ÙŠØ§Ø±", "points": 15, "isRevealed": false},
                {"text": "Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ", "points": 10, "isRevealed": false},
                {"text": "Ø§Ù„Ø·Ø¨ÙŠØ¨", "points": 5, "isRevealed": false},
              ]
            },
            {
              "id": 3,
              "question": "ÙØ§ÙƒÙ‡Ø© Ù†Ø£ÙƒÙ„Ù‡Ø§ ÙÙŠ ÙØµÙ„ Ø§Ù„ØµÙŠÙ Ø¨Ø´ÙƒÙ„ Ø®Ø§ØµØŸ",
              "answers": [
                {"text": "Ø§Ù„Ø¨Ø·ÙŠØ®", "points": 45, "isRevealed": false},
                {"text": "Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ", "points": 20, "isRevealed": false},
                {"text": "Ø§Ù„Ø¹Ù†Ø¨", "points": 15, "isRevealed": false},
                {"text": "Ø§Ù„Ø®ÙˆØ®/Ø§Ù„Ø¨Ø±Ù‚ÙˆÙ‚", "points": 10, "isRevealed": false},
                {"text": "Ø§Ù„ØªÙŠÙ†", "points": 5, "isRevealed": false}
              ]
            },
            {
                "id": 4,
                "question": "Ø­ÙŠÙˆØ§Ù† ÙŠØ®Ø§Ù Ù…Ù†Ù‡ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø§Ø³ØŸ",
                "answers": [
                    {"text": "Ø§Ù„Ø«Ø¹Ø¨Ø§Ù†/Ø§Ù„Ø£ÙØ¹Ù‰", "points": 30, "isRevealed": false},
                    {"text": "Ø§Ù„ØµØ±ØµÙˆØ±/Ø§Ù„Ø­Ø´Ø±Ø§Øª", "points": 25, "isRevealed": false},
                    {"text": "Ø§Ù„ÙØ£Ø±", "points": 20, "isRevealed": false},
                    {"text": "Ø§Ù„ÙƒÙ„Ø¨", "points": 15, "isRevealed": false},
                    {"text": "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", "points": 10, "isRevealed": false}
                ]
            },
            {
                "id": 5,
                "question": "Ø´ÙŠØ¡ ØªØ¶Ø¹Ù‡ ÙÙŠ Ù…Ø­ÙØ¸ØªÙƒ/Ø¬ÙŠØ¨Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…Ù†Ø²Ù„ØŸ",
                "answers": [
                    {"text": "Ø§Ù„Ù‡Ø§ØªÙ", "points": 40, "isRevealed": false},
                    {"text": "Ø§Ù„Ù…ÙØ§ØªÙŠØ­", "points": 30, "isRevealed": false},
                    {"text": "Ø§Ù„Ù†Ù‚ÙˆØ¯/Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª", "points": 20, "isRevealed": false},
                    {"text": "Ù…Ù†Ø§Ø¯ÙŠÙ„ ÙˆØ±Ù‚ÙŠØ©", "points": 10, "isRevealed": false}
                ]
            }
        ];


        // =========================================================
        // 6. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¹Ù†Ø§ØµØ± DOM
        // =========================================================
        
        let questions = questionsData.slice(0, 5); 
        let currentQuestionIndex = 0;
        let scoreRed = 0;
        let scoreBlue = 0;
        let roundScore = 0;
        let strikes = 0;
        const MAX_STRIKES = 3;
        let currentTurn = 'none'; // Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø©
        let stealingTeam = null; 
        let stealingMode = false; // **Ù…ØªØºÙŠØ± Ø¬Ø¯ÙŠØ¯: Ø­Ø§Ù„Ø© Ø§Ù„Ø³Ø±Ù‚Ø©**
        
        // Ø§Ù„Ø¹Ù†Ø§ØµØ± DOM
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const intermissionScreen = document.getElementById('intermission-screen');
        const endScreen = document.getElementById('end-screen');
        const answersBoard = document.getElementById('answers-board');
        const nextStrikeBtn = document.getElementById('next-strike-btn');
        const nextBtn = document.getElementById('next-question-btn');
        const revealAllBtn = document.getElementById('reveal-all-btn');
        const currentRoundScoreElement = document.getElementById('current-round-score');
        const strikeFlashContainer = document.getElementById('strike-flash-container');
        const selectStartTeamButtons = document.getElementById('select-start-team-buttons'); 

        const startRedBtn = document.getElementById('start-red-btn');
        const startBlueBtn = document.getElementById('start-blue-btn');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ø±Ù‚Ø©
        const stealPanel = document.getElementById('steal-panel');
        const stealingTeamNameElement = document.getElementById('stealing-team-name');
        const stealFailBtn = document.getElementById('steal-fail-btn'); // ØªÙ… Ø¥Ø¨Ù‚Ø§Ø¡ Ø²Ø± Ø§Ù„Ø®Ø·Ø£ ÙÙ‚Ø·
        
        // Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© (Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªÙØ¹ÙŠÙ„ Ø³Ù…Ø§Ø¹Ø§ØªÙƒ Ø£Ùˆ Ø¥Ø°Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª)
        const correctSound = new Audio('https://www.soundjay.com/misc/sounds/success-sound-effect-1.mp3'); 
        const strikeSound = new Audio('https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3'); 

        // =========================================================
        // 7. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„ÙˆØ¸Ø§Ø¦Ù
        // =========================================================

        function updateScoreDisplays() {
            document.getElementById('score-red').textContent = scoreRed;
            document.getElementById('score-blue').textContent = scoreBlue;
            currentRoundScoreElement.textContent = roundScore;
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
            document.getElementById('team-red-box').classList.remove('active-turn');
            document.getElementById('team-blue-box').classList.remove('active-turn');
            if (currentTurn === 'red' && !stealingMode) {
                document.getElementById('team-red-box').classList.add('active-turn');
            } else if (currentTurn === 'blue' && !stealingMode) {
                document.getElementById('team-blue-box').classList.add('active-turn');
            } else if (stealingMode) { // ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø³Ø§Ø±Ù‚
                const activeStealBox = stealingTeam === 'red' ? 'team-red-box' : 'team-blue-box';
                document.getElementById(activeStealBox).classList.add('active-turn');
            }
        }

        function startGame() {
            scoreRed = 0;
            scoreBlue = 0;
            currentQuestionIndex = 0;
            currentTurn = 'none'; 
            stealingMode = false;
            questions.forEach(q => q.answers.forEach(a => a.isRevealed = false));
            
            startScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            
            showIntermissionScreen(); 
        }
        
        function showIntermissionScreen() {
            gameScreen.classList.add('hidden');
            intermissionScreen.classList.remove('hidden');
            
            const nextQNum = currentQuestionIndex + 1;
            document.getElementById('next-q-number').textContent = nextQNum;
            document.getElementById('int-score-red').textContent = scoreRed;
            document.getElementById('int-score-blue').textContent = scoreBlue;

            if (nextQNum > questions.length) {
                endGame();
            }
        }
        
        function prepareQuestion() {
            intermissionScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            
            const currentQ = questions[currentQuestionIndex];
            answersBoard.innerHTML = '';
            roundScore = 0;
            strikes = 0;
            stealingTeam = null;
            currentTurn = 'none';
            stealingMode = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
            updateScoreDisplays();
            
            nextStrikeBtn.classList.add('hidden');
            revealAllBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
            stealPanel.classList.add('hidden');
            selectStartTeamButtons.classList.remove('hidden');
            
            // Ø¨Ù†Ø§Ø¡ Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ØºÙ„Ù‚Ø©
            currentQ.answers.forEach((ans, index) => {
                const slot = document.createElement('div');
                slot.className = 'answer-slot';
                slot.setAttribute('data-index', index);
                slot.style.pointerEvents = 'none'; 
                
                ans.isRevealed = false;

                slot.innerHTML = `
                    <span class="answer-text">${ans.text}</span>
                    <span class="answer-points">${ans.points}</span>
                    <div class="cover">
                        <span class="answer-number">${index + 1}</span>
                    </div>
                `;
                
                answersBoard.appendChild(slot);
            });
        }
        
        function loadQuestion(startingTeam) {
            currentTurn = startingTeam; 
            updateScoreDisplays();
            
            selectStartTeamButtons.classList.add('hidden');
            nextStrikeBtn.classList.remove('hidden');
            revealAllBtn.classList.remove('hidden');
            nextStrikeBtn.disabled = false;
            revealAllBtn.disabled = false;
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            document.querySelectorAll('.answer-slot').forEach((slot, index) => {
                slot.style.pointerEvents = 'auto';
                // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ù…Ø³ØªÙ…Ø¹Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© Ù‚Ø¨Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯
                const newSlot = slot.cloneNode(true);
                slot.parentNode.replaceChild(newSlot, slot);
                newSlot.addEventListener('click', () => revealAnswer(index));
            });
        }

        function flashStrike(symbol) {
            strikeFlashContainer.classList.remove('hidden'); 
            strikeFlashContainer.textContent = symbol;
            strikeSound.play(); 

            strikeFlashContainer.style.animation = 'none';
            void strikeFlashContainer.offsetWidth; 
            
            strikeFlashContainer.style.animation = 'strikeFlash 0.5s forwards'; 
            
            setTimeout(() => {
                strikeFlashContainer.classList.add('hidden');
            }, 500); 
        }

        // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ù‚Ø©
        function revealAnswer(index) {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙˆÙ…ÙŠØ¶ ÙÙˆØ±Ø§Ù‹
            strikeFlashContainer.classList.add('hidden'); 

            const currentQ = questions[currentQuestionIndex];
            const ans = currentQ.answers[index];
            
            if (ans.isRevealed) return;
            
            // 1. **Ù…Ù†Ø·Ù‚ Ø§Ù„Ø³Ø±Ù‚Ø© (Stealing Mode)**
            if (stealingMode) {
                // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© Ù…Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø³Ø§Ø±Ù‚
                ans.isRevealed = true;
                roundScore += ans.points; 
                correctSound.play(); 
                updateScoreDisplays();
                
                const slotElement = answersBoard.querySelector(`[data-index='${index}']`);
                if (slotElement) {
                    slotElement.classList.add('revealed');
                }
                
                // Ø§Ù„Ø³Ø±Ù‚Ø© ØªÙ…Øª Ø¨Ù†Ø¬Ø§Ø­: ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© ÙÙˆØ±Ø§Ù‹
                transferPoints(stealingTeam);
                stealingMode = false;
                stealPanel.classList.add('hidden');
                endRound();
                return; 
            }

            // 2. **Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¹Ø§Ø¯ÙŠ (ÙƒØ´Ù Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ØµÙ„ÙŠ)**
            if (strikes >= MAX_STRIKES) return; 

            ans.isRevealed = true;
            roundScore += ans.points; 
            correctSound.play(); 
            updateScoreDisplays();

            const slotElement = answersBoard.querySelector(`[data-index='${index}']`);
            if (slotElement) {
                slotElement.classList.add('revealed');
            }
            
            const allRevealed = currentQ.answers.every(a => a.isRevealed);
            if (allRevealed) {
                transferPoints(currentTurn); 
                endRound(); 
            }
        }

        function handleStrike() {
            
            strikeFlashContainer.classList.add('hidden');
            
            if (strikes >= MAX_STRIKES) return; 

            strikes++;
            
            const strikeSymbol = 'âŒ'.repeat(strikes);
            flashStrike(strikeSymbol); 

            updateScoreDisplays(); 
            
            if (strikes >= MAX_STRIKES) {
                initiateStealOpportunity();
            }
        }
        
        function initiateStealOpportunity() {
            strikeFlashContainer.classList.add('hidden'); 
            
            stealingMode = true; // **ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ù‚Ø©**
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø© ØºÙŠØ± Ø§Ù„Ù…ÙƒØ´ÙˆÙØ©
            document.querySelectorAll('.answer-slot').forEach((slot, index) => {
                const currentQ = questions[currentQuestionIndex];
                if (!currentQ.answers[index].isRevealed) {
                     slot.style.pointerEvents = 'auto'; // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
                } else {
                     slot.style.pointerEvents = 'none'; // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø© Ø§Ù„Ù…ÙƒØ´ÙˆÙØ©
                }
            });

            nextStrikeBtn.disabled = true;
            revealAllBtn.disabled = true;

            stealingTeam = (currentTurn === 'red') ? 'blue' : 'red';
            const stealingTeamName = (stealingTeam === 'red') ? 'Ø§Ù„Ø£Ø­Ù…Ø±' : 'Ø§Ù„Ø£Ø²Ø±Ù‚';

            stealingTeamNameElement.textContent = stealingTeamName;
            stealPanel.classList.remove('hidden');
            updateScoreDisplays(); // Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ø¯ÙˆØ± Ø¥Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø³Ø§Ø±Ù‚
        }

        // ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ù„Ù„Ø³Ø±Ù‚Ø© Ø§Ù„ÙØ§Ø´Ù„Ø© ÙÙ‚Ø·
        function resolveStealFail() {
            stealingMode = false;
            stealPanel.classList.add('hidden');
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬ÙˆØ¨Ø© Ø¨Ø¹Ø¯ ÙØ´Ù„ Ø§Ù„Ø³Ø±Ù‚Ø©
            document.querySelectorAll('.answer-slot').forEach(slot => {
                slot.style.pointerEvents = 'none';
            });

            // âŒ Ø¹Ø±Ø¶ X Ø¥Ø¶Ø§ÙÙŠ
            flashStrike('âŒ');
            
            // Ù…Ù†Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ØµÙ„ÙŠ ÙˆØ¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©
            setTimeout(() => {
                transferPoints(currentTurn); 
                endRound(); 
            }, 500); 
        }

        function endRound() {
            strikeFlashContainer.classList.add('hidden'); 
            
            stealingMode = false; // Ø¥Ù†Ù‡Ø§Ø¡ ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ù‚Ø©
            
            // ÙƒØ´Ù Ø£ÙŠ Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©
             questions[currentQuestionIndex].answers.forEach((ans, index) => {
                const slotElement = answersBoard.querySelector(`[data-index='${index}']`);
                if (slotElement && !ans.isRevealed) {
                   slotElement.classList.add('revealed');
                }
            });
            
            document.querySelectorAll('.answer-slot').forEach(slot => {
                slot.style.pointerEvents = 'none';
            });
            nextStrikeBtn.classList.add('hidden');
            revealAllBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
            updateScoreDisplays(); // Ù„Ø¥Ø²Ø§Ù„Ø© Ù…Ø¤Ø´Ø± Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ù†Ø´Ø·
        }
        
        function transferPoints(team) {
            if (roundScore === 0) return;

            if (team === 'red') {
                scoreRed += roundScore;
            } else if (team === 'blue') {
                scoreBlue += roundScore;
            }
            roundScore = 0; 
            updateScoreDisplays();
        }

        function revealAllAnswersAndEnd() {
            strikeFlashContainer.classList.add('hidden'); 
            
            roundScore = 0;
            strikes = MAX_STRIKES; 
            updateScoreDisplays();
            
            endRound(); 
        }

        function goToNextIntermission() {
            currentQuestionIndex++;
            showIntermissionScreen();
        }

        function endGame() {
            gameScreen.classList.add('hidden');
            intermissionScreen.classList.add('hidden');
            endScreen.classList.remove('hidden');
            
            const endMessage = document.getElementById('end-message');

            document.getElementById('final-score-red').textContent = scoreRed;
            document.getElementById('final-score-blue').textContent = scoreBlue;

            if (scoreRed > scoreBlue) {
                endMessage.textContent = 'ğŸ† ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø²! ğŸ†';
            } else if (scoreBlue > scoreRed) {
                endMessage.textContent = 'ğŸ† ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚ Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø²! ğŸ†';
            } else {
                endMessage.textContent = 'ØªØ¹Ø§Ø¯Ù„! ÙƒØ§Ù†Øª Ù…Ù†Ø§ÙØ³Ø© Ø­Ø§Ù…ÙŠØ© Ø§Ù„ÙˆØ·ÙŠØ³! ğŸ¤';
            }
        }

        function restartGame() {
            scoreRed = 0;
            scoreBlue = 0;
            currentQuestionIndex = 0;
            roundScore = 0;
            strikes = 0;
            currentTurn = 'none';
            stealingMode = false;
            updateScoreDisplays();
            
            endScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        }


        // =========================================================
        // 8. Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event Listeners)
        // =========================================================

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('start-game-btn').addEventListener('click', startGame);
            document.getElementById('next-round-btn').addEventListener('click', prepareQuestion);
            
            startRedBtn.addEventListener('click', () => loadQuestion('red'));
            startBlueBtn.addEventListener('click', () => loadQuestion('blue'));
            
            nextStrikeBtn.addEventListener('click', handleStrike);
            nextBtn.addEventListener('click', goToNextIntermission);
            document.getElementById('restart-game-btn').addEventListener('click', restartGame);
            revealAllBtn.addEventListener('click', revealAllAnswersAndEnd);
            
            // Ø±Ø¨Ø· Ø²Ø± Ø§Ù„Ø³Ø±Ù‚Ø© Ø§Ù„ÙØ§Ø´Ù„Ø© Ø¨Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            stealFailBtn.addEventListener('click', resolveStealFail); 

            updateScoreDisplays();
            startScreen.classList.remove('hidden');
            gameScreen.classList.add('hidden');
            intermissionScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
        });

    </script>
</body>
</html>
