<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„ÙØµÙˆÙ„ (Ù…Ø±ØªØ¨)</title>
    
    <style>
        /* ========================================================= */
        /* SECTION 1: Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† */
        /* ========================================================= */
        :root {
            --primary-blue: #002b5e; 
            --accent-orange: #ff9900; 
            --dark-blue-bg: #00001a; 
            --light-gold: #ffeb3b;
            --neon-blue: #0088ff;
            --text-color: #f0f0f0; 
            --error-red: #e60000; 
            --team-red: #d82b2b;
            --team-blue: #1c529e;
            --slot-border: #ffffff;
        }

        /* ========================================================= */
        /* SECTION 2: Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ø§Ù… ÙˆØ®Ù„ÙÙŠØ© Ø§Ù„Ù€ BODY */
        /* ========================================================= */
        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--dark-blue-bg); 
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            direction: rtl;
            padding: 20px;
            position: relative;
            overflow: hidden; 
        }

        .hidden { display: none !important; }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù„Ø¹Ø¨ (Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø¹Ø§Ø¹ÙŠØ©) */
        .screen {
            text-align: center;
            padding: 20px;
            background-image: 
                radial-gradient(ellipse at center, rgba(0, 43, 94, 0.4) 0%, rgba(0, 31, 76, 0.8) 50%, rgba(0, 0, 0, 1) 100%),
                repeating-radial-gradient(circle at 50% 50%, rgba(0, 43, 94, 0.1) 0px, transparent 150px);
            background-repeat: no-repeat;
            background-size: cover;
            background-color: var(--dark-blue-bg); 

            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.9);
            width: 95%;
            max-width: 1200px;
            border: 3px solid var(--accent-orange);
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 90vh; 
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .main-btn {
            background-color: var(--accent-orange);
            color: var(--primary-blue);
            border: 4px solid var(--primary-blue);
            padding: 15px 30px;
            font-size: 1.3em;
            cursor: pointer;
            border-radius: 10px;
            font-weight: bold;
            margin: 10px 10px; 
            box-shadow: 0 6px var(--primary-blue);
            transition: all 0.2s;
        }
        .main-btn:hover:not([disabled]) {
            background-color: var(--primary-blue);
            color: var(--accent-orange);
            transform: translateY(3px) scale(1.03);
            box-shadow: 0 3px var(--accent-orange);
        }

        /* ========================================================= */
        /* SECTION 3: Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¹Ù„ÙˆÙŠØ© ÙˆØ§Ù„ØªØ­ÙƒÙ… */
        /* ========================================================= */
        .score-teams-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 20px;
        }
        .team-score-box {
            flex-grow: 1;
            padding: 15px 20px;
            border-radius: 10px;
            border: 3px solid var(--accent-orange); 
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
            transition: border-color 0.3s;
        }
        .team-score-box.active-turn {
            border-color: var(--neon-blue);
            box-shadow: 0 0 15px var(--neon-blue), inset 0 0 15px var(--neon-blue);
        }
        .game-controls {
            background: var(--primary-blue);
            border: 3px solid var(--accent-orange);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .strike-display { 
            font-size: 1.5em; 
            color: var(--error-red);
            font-weight: bold;
        }
        .steal-panel {
            background: var(--primary-blue);
            border: 4px solid var(--error-red);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        /* ========================================================= */
        /* SECTION 4: Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (ØªØµÙ…ÙŠÙ… Ù…Ø¯Ù…Ø¬) */
        /* ========================================================= */
        
        #answers-board-wrapper {
            position: relative;
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-top: 60px; 
            margin-bottom: 20px;
        }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„Ù…Ø¶ÙŠØ¦Ø© */
        #round-score-display-box {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translate(-50%, -100%);
            width: 150px;
            height: 70px;
            background-color: #00001a;
            border: 5px solid var(--neon-blue);
            border-radius: 5px;
            box-shadow: 0 0 15px var(--neon-blue), inset 0 0 10px var(--neon-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            font-weight: bold;
            color: #ffffff;
            z-index: 5;
            overflow: hidden;
        }
        #current-round-score-display {
            text-shadow: 0 0 5px #ffffff, 0 0 10px var(--neon-blue);
        }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ÙˆØ­Ø© (Ø§Ù„Ù‚ÙˆØ³ Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ) */
        #answers-board-container {
            position: relative;
            background-color: var(--primary-blue);
            border-radius: 20px;
            height: 90%; 
            width: 100%;
            max-width: 900px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7); 
            padding: 10px;
            padding-top: 60px; 
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù‚ÙˆØ³ Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ */
        #answers-board-container::before {
            content: '';
            position: absolute;
            top: -100px; 
            left: -5%; 
            right: -5%; 
            height: 200px;
            border: 10px solid var(--accent-orange);
            border-radius: 50%;
            border-top-color: transparent;
            border-left-color: transparent;
            border-right-color: transparent;
            z-index: 1;
            box-sizing: border-box;
            box-shadow: 0 0 15px rgba(255, 153, 0, 0.5); 
        }
        
        /* Ù…Ø³ØªØ·ÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        #question-header-mock {
            position: absolute;
            top: -40px; 
            left: 50%;
            transform: translateX(-50%);
            width: 70%; 
            height: 80px; 
            background-color: var(--primary-blue);
            border: 3px solid var(--accent-orange);
            border-radius: 40px; 
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em; 
            font-weight: bold;
            color: var(--accent-orange);
            padding: 5px 20px;
            z-index: 2;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª */
        .answers-board {
            display: grid;
            grid-template-columns: repeat(2, 1fr); 
            grid-template-rows: repeat(auto-fit, minmax(70px, 1fr)); 
            gap: 15px 30px; 
            padding: 25px;
            height: 100%; 
        }

        /* Ø®Ø§Ù†Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© */
        .answer-slot {
            background-color: var(--primary-blue); 
            color: var(--slot-border); 
            border: 2px solid var(--slot-border); 
            padding: 15px 20px;
            border-radius: 5px; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.8em; 
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            overflow: hidden;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ù†Ù‚Ø§Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        .answer-text, .answer-points {
            opacity: 0; 
            transition: opacity 0.5s ease-in;
            z-index: 9;
        }
        .answer-slot.revealed .answer-text, .answer-slot.revealed .answer-points {
            opacity: 1; 
        }
        
        /* Ø§Ù„ØºØ·Ø§Ø¡ Ø§Ù„Ù…Ø®ÙÙŠ (Ø§Ù„Ø°ÙŠ ÙŠØ­Ù…Ù„ Ø§Ù„Ø±Ù‚Ù…) */
        .cover {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--primary-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.3s ease-out;
            z-index: 10; 
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØºØ·Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØ´Ù */
        .answer-slot.revealed .cover {
            opacity: 0;
            pointer-events: none; 
        }

        .cover .answer-number {
            color: var(--slot-border);
            font-size: 3em;
            border-bottom: 5px solid var(--accent-orange);
            padding: 0 10px 5px;
        }

        /* ========================================================= */
        /* SECTION 5: Ù…Ø¤Ø«Ø± Ø§Ù„Ø®Ø·Ø£ (X) */
        /* ========================================================= */
        #strike-flash-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: flex; 
            justify-content: center;
            align-items: center;
            color: var(--error-red);
            font-size: min(60vw, 60vh); 
            font-weight: 900;
            text-shadow: 0 0 20px var(--error-red), 0 0 50px var(--error-red), 0 0 10px black; 
            white-space: nowrap; 
            opacity: 0; 
        }

        @keyframes strikeFlash {
            0% { opacity: 0; transform: scale(1.0) rotate(0deg); }
            20% { opacity: 0.8; transform: scale(1.08) rotate(-1deg); } 
            50% { opacity: 1; transform: scale(1.15) rotate(1deg); } 
            100% { opacity: 0; transform: scale(1.1); } 
        }

        /* ØªØ¹Ø¯ÙŠÙ„ Ù„ØªÙˆØ³ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙÙŠ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        #start-screen h1 {
            margin-top: auto; /* ÙŠØ¯ÙØ¹ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù† */
            margin-bottom: 20px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø²Ø± */
            font-size: 3.5em; /* ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª */
        }
        #start-screen .main-btn {
            margin-top: auto; /* ÙŠØ¯ÙØ¹ Ø§Ù„Ø²Ø± Ù„Ù„Ø£Ø³ÙÙ„ Ø¨Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù† */
        }
        
    </style>
</head>
<body>

    <div id="strike-flash-container" class="hidden"></div>
    
    <div id="start-screen" class="screen">
        <h1>ØªØ­Ø¯ÙŠ Ø§Ù„ÙØµÙˆÙ„</h1>
        <button id="start-game-btn" class="main-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <div id="game-screen" class="screen hidden">
        
        <div class="score-teams-container">
            <div id="team-red-box" class="team-score-box">
                <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±</h2>
                <span id="score-red" class="score-value">0</span>
            </div>
            <div id="team-blue-box" class="team-score-box">
                <h2>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚</h2>
                <span id="score-blue" class="score-value">0</span>
            </div>
        </div>
        
        <div class="game-controls">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div id="strikes-display" class="strike-display"></div>
            </div>
            
            <div id="steal-panel" class="steal-panel hidden">
                <h3>ÙØ±ØµØ© Ø§Ù„Ø³Ø±Ù‚Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ <span id="stealing-team-name"></span> Ø¹Ù„ÙŠÙ‡ Ø¥Ø¹Ø·Ø§Ø¡ Ø¥Ø¬Ø§Ø¨Ø©</h3>
                <div class="steal-buttons">
                    <button id="steal-fail-btn" class="main-btn" style="background-color: var(--error-red);">Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© (Ø®Ø·Ø£)</button>
                </div>
            </div>

            <div id="select-start-team-buttons" class="hidden">
                <button id="start-red-btn" class="main-btn" style="background-color: var(--team-red);">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±</button>
                <button id="start-blue-btn" class="main-btn" style="background-color: var(--team-blue);">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚</button>
            </div>
        </div>

        <div id="answers-board-wrapper">
            <div id="round-score-display-box">
                <span id="current-round-score-display">0</span>
            </div>
            
            <div id="answers-board-container">
                <div id="question-header-mock">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div id="answers-board" class="answers-board">
                    </div>
            </div>
        </div>

        <div class="control-buttons" style="margin-top: 20px;">
            <button id="next-strike-btn" class="main-btn strike-btn hidden" style="background-color: var(--error-red);">Ø®Ø·Ø£ (X)</button>
            <button id="reveal-all-btn" class="main-btn hidden">ÙƒØ´Ù Ø§Ù„ÙƒÙ„</button>
            <button id="next-question-btn" class="main-btn next-btn hidden">Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
    </div>
    
    <div id="intermission-screen" class="screen hidden">
        <h1>Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ</h1>
        <p class="subtitle">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… <span id="next-q-number"></span> Ù‚Ø§Ø¯Ù…!</p>
        <div class="intermission-scores">
            <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h2>
            <p>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±: <span id="int-score-red">0</span> Ù†Ù‚Ø·Ø©</p>
            <p>Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚: <span id="int-score-blue">0</span> Ù†Ù‚Ø·Ø©</p>
        </div>
        <button id="next-round-btn" class="main-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <div id="end-screen" class="screen hidden">
        <h1 id="end-message"></h1>
        <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± <span id="final-score-red">0</span> | Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚ <span id="final-score-blue">0</span></h2>
        <button id="restart-game-btn" class="main-btn">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
    </div>

    
    <script>
        // =========================================================
        // SECTION 6: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        // =========================================================
        const questionsData = [
            {
              "id": 1,
              "question": "Ø´ÙŠØ¡ ÙŠÙØ¹Ù„Ù‡ Ø§Ù„Ù†Ø§Ø³ Ù‚Ø¨Ù„ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù†ÙˆÙ…ØŸ",
              "answers": [
                {"text": "ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø³Ù†Ø§Ù†", "points": 35, "isRevealed": false},
                {"text": "ØªÙÙ‚Ø¯ Ø§Ù„Ù‡Ø§ØªÙ/Ø§Ù„ØªØµÙØ­", "points": 25, "isRevealed": false},
                {"text": "ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ù„Ø§Ø¨Ø³/Ø§Ù„Ø¨ÙŠØ¬Ø§Ù…Ø§", "points": 15, "isRevealed": false},
                {"text": "Ø¶Ø¨Ø· Ø§Ù„Ù…Ù†Ø¨Ù‡", "points": 10, "isRevealed": false},
                {"text": "Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡", "points": 7, "isRevealed": false},
                {"text": "Ù‚Ø±Ø§Ø¡Ø© ÙƒØªØ§Ø¨", "points": 8, "isRevealed": false}
              ]
            },
            {
              "id": 2,
              "question": "Ù…Ù‡Ù†Ø© ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø¹Ø§Ù…Ù„ÙŠÙ† ÙÙŠÙ‡Ø§ Ù„Ø¯ÙŠÙ‡Ù… Ø£ÙƒØ«Ø± Ø¥Ø¬Ø§Ø²Ø§ØªØŸ",
              "answers": [
                {"text": "Ø§Ù„Ù…Ø¹Ù„Ù…/Ø§Ù„Ù…Ø¯Ø±Ø³", "points": 40, "isRevealed": false},
                {"text": "Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠ", "points": 25, "isRevealed": false},
                {"text": "Ø§Ù„Ø·ÙŠØ§Ø±", "points": 15, "isRevealed": false},
                {"text": "Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ", "points": 10, "isRevealed": false},
                {"text": "Ø§Ù„Ø·Ø¨ÙŠØ¨", "points": 5, "isRevealed": false},
              ]
            },
            {
              "id": 3,
              "question": "ÙØ§ÙƒÙ‡Ø© Ù†Ø£ÙƒÙ„Ù‡Ø§ ÙÙŠ ÙØµÙ„ Ø§Ù„ØµÙŠÙ Ø¨Ø´ÙƒÙ„ Ø®Ø§ØµØŸ",
              "answers": [
                {"text": "Ø§Ù„Ø¨Ø·ÙŠØ®", "points": 45, "isRevealed": false},
                {"text": "Ø§Ù„Ù…Ø§Ù†Ø¬Ùˆ", "points": 20, "isRevealed": false},
                {"text": "Ø§Ù„Ø¹Ù†Ø¨", "points": 15, "isRevealed": false},
                {"text": "Ø§Ù„Ø®ÙˆØ®/Ø§Ù„Ø¨Ø±Ù‚ÙˆÙ‚", "points": 10, "isRevealed": false},
                {"text": "Ø§Ù„ØªÙŠÙ†", "points": 5, "isRevealed": false}
              ]
            },
            {
                "id": 4,
                "question": "Ø­ÙŠÙˆØ§Ù† ÙŠØ®Ø§Ù Ù…Ù†Ù‡ Ø§Ù„ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø§Ø³ØŸ",
                "answers": [
                    {"text": "Ø§Ù„Ø«Ø¹Ø¨Ø§Ù†/Ø§Ù„Ø£ÙØ¹Ù‰", "points": 30, "isRevealed": false},
                    {"text": "Ø§Ù„ØµØ±ØµÙˆØ±/Ø§Ù„Ø­Ø´Ø±Ø§Øª", "points": 25, "isRevealed": false},
                    {"text": "Ø§Ù„ÙØ£Ø±", "points": 20, "isRevealed": false},
                    {"text": "Ø§Ù„ÙƒÙ„Ø¨", "points": 15, "isRevealed": false},
                    {"text": "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", "points": 10, "isRevealed": false}
                ]
            },
            {
                "id": 5,
                "question": "Ø´ÙŠØ¡ ØªØ¶Ø¹Ù‡ ÙÙŠ Ù…Ø­ÙØ¸ØªÙƒ/Ø¬ÙŠØ¨Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…Ù†Ø²Ù„ØŸ",
                "answers": [
                    {"text": "Ø§Ù„Ù‡Ø§ØªÙ", "points": 40, "isRevealed": false},
                    {"text": "Ø§Ù„Ù…ÙØ§ØªÙŠØ­", "points": 30, "isRevealed": false},
                    {"text": "Ø§Ù„Ù†Ù‚ÙˆØ¯/Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª", "points": 20, "isRevealed": false},
                    {"text": "Ù…Ù†Ø§Ø¯ÙŠÙ„ ÙˆØ±Ù‚ÙŠØ©", "points": 10, "isRevealed": false}
                ]
            }
        ];

        // =========================================================
        // SECTION 7: Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙˆØ¹Ù†Ø§ØµØ± DOM
        // =========================================================
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        let questions = questionsData.slice(0, 5); 
        let currentQuestionIndex = 0;
        let scoreRed = 0;
        let scoreBlue = 0;
        let roundScore = 0;
        let strikes = 0;
        const MAX_STRIKES = 3;
        let currentTurn = 'none'; 
        let stealingTeam = null; 
        let stealingMode = false; 
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø´Ø§Ø´Ø©
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const intermissionScreen = document.getElementById('intermission-screen');
        const endScreen = document.getElementById('end-screen');
        const answersBoard = document.getElementById('answers-board');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø®Ø±Ø§Ø¬
        const nextStrikeBtn = document.getElementById('next-strike-btn');
        const nextBtn = document.getElementById('next-question-btn');
        const revealAllBtn = document.getElementById('reveal-all-btn');
        const currentRoundScoreElement = document.getElementById('current-round-score-display');
        const strikeFlashContainer = document.getElementById('strike-flash-container');
        const selectStartTeamButtons = document.getElementById('select-start-team-buttons'); 
        const questionHeaderMock = document.getElementById('question-header-mock'); 
        const strikesDisplay = document.getElementById('strikes-display'); 

        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„ÙØ±Ù‚
        const teamRedBox = document.getElementById('team-red-box');
        const teamBlueBox = document.getElementById('team-blue-box');
        const stealPanel = document.getElementById('steal-panel');
        const stealingTeamNameElement = document.getElementById('stealing-team-name');
        const stealFailBtn = document.getElementById('steal-fail-btn'); 
        
        // Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© 
        const correctSound = new Audio('https://www.soundjay.com/misc/sounds/success-sound-effect-1.mp3'); 
        const strikeSound = new Audio('https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3'); 

        // =========================================================
        // SECTION 8: ÙˆØ¸Ø§Ø¦Ù ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (UI Updates)
        // =========================================================

        function updateScoreDisplays() {
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
            document.getElementById('score-red').textContent = scoreRed;
            document.getElementById('score-blue').textContent = scoreBlue;
            // ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ù…Ø¶ÙŠØ¦Ø©
            currentRoundScoreElement.textContent = roundScore;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¶Ø±Ø¨Ø§Øª (X)
            strikesDisplay.textContent = 'âŒ'.repeat(strikes);
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¤Ø´Ø± Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
            teamRedBox.classList.remove('active-turn');
            teamBlueBox.classList.remove('active-turn');
            if (currentTurn === 'red' && !stealingMode) {
                teamRedBox.classList.add('active-turn');
            } else if (currentTurn === 'blue' && !stealingMode) {
                teamBlueBox.classList.add('active-turn');
            } else if (stealingMode) {
                const activeStealBox = stealingTeam === 'red' ? teamRedBox : teamBlueBox;
                activeStealBox.classList.add('active-turn');
            }
        }
        
        function flashStrike(symbol) {
            // Ù…Ø¤Ø«Ø± Ø¸Ù‡ÙˆØ± ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„ÙƒØ¨ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©
            strikeFlashContainer.classList.remove('hidden'); 
            strikeFlashContainer.textContent = symbol;
            strikeSound.play(); 

            strikeFlashContainer.style.animation = 'none';
            void strikeFlashContainer.offsetWidth; 
            strikeFlashContainer.style.animation = 'strikeFlash 0.5s forwards'; 
            
            setTimeout(() => {
                strikeFlashContainer.classList.add('hidden');
            }, 500); 
        }

        function showScreen(screenToShow) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙ‚Ø·
            startScreen.classList.add('hidden');
            gameScreen.classList.add('hidden');
            intermissionScreen.classList.add('hidden');
            endScreen.classList.add('hidden');
            screenToShow.classList.remove('hidden');
        }


        // =========================================================
        // SECTION 9: ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ§Ù„Ø¬ÙˆÙ„Ø§Øª
        // =========================================================

        function initGame() {
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©
            scoreRed = 0;
            scoreBlue = 0;
            currentQuestionIndex = 0;
            currentTurn = 'none'; 
            stealingMode = false;
            questions.forEach(q => q.answers.forEach(a => a.isRevealed = false));
            
            showIntermissionScreen(); 
        }
        
        function showIntermissionScreen() {
            // Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            showScreen(intermissionScreen);
            
            const nextQNum = currentQuestionIndex + 1;
            document.getElementById('next-q-number').textContent = nextQNum;
            document.getElementById('int-score-red').textContent = scoreRed;
            document.getElementById('int-score-blue').textContent = scoreBlue;

            if (nextQNum > questions.length) {
                endGame();
            }
        }
        
        function prepareQuestion() {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©
            showScreen(gameScreen);
            
            const currentQ = questions[currentQuestionIndex];
            answersBoard.innerHTML = '';
            roundScore = 0;
            strikes = 0; 
            stealingTeam = null;
            currentTurn = 'none';
            stealingMode = false; 
            updateScoreDisplays();
            
            questionHeaderMock.textContent = currentQ.question; 
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            nextStrikeBtn.classList.remove('hidden');
            nextStrikeBtn.disabled = false;
            revealAllBtn.classList.add('hidden'); 
            nextBtn.classList.add('hidden');
            stealPanel.classList.add('hidden');
            selectStartTeamButtons.classList.remove('hidden');
            
            // Ø¨Ù†Ø§Ø¡ Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ØºØ·Ø§Ø©
            const answersToDisplay = currentQ.answers.slice(0, 6); 

            answersToDisplay.forEach((ans, index) => {
                const slot = document.createElement('div');
                slot.className = 'answer-slot';
                slot.setAttribute('data-index', index);
                
                ans.isRevealed = false;

                slot.innerHTML = `
                    <span class="answer-points">${ans.points}</span>
                    <span class="answer-text">${ans.text}</span>
                    <div class="cover">
                        <span class="answer-number">${index + 1}</span>
                    </div>
                `;
                
                slot.addEventListener('click', () => revealAnswer(index));

                answersBoard.appendChild(slot);
            });
        }
        
        function loadQuestion(startingTeam) {
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø±Ø³Ù…ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø¯Ø¦
            currentTurn = startingTeam; 
            strikes = 0; 
            updateScoreDisplays();
            
            selectStartTeamButtons.classList.add('hidden');
            revealAllBtn.classList.remove('hidden');
            revealAllBtn.disabled = false;
            
            document.querySelectorAll('.answer-slot').forEach(slot => {
                slot.style.pointerEvents = 'auto';
            });
        }

        function revealAnswer(index) {
            // ÙƒØ´Ù Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·
            const currentQ = questions[currentQuestionIndex];
            const ans = currentQ.answers[index]; 
            
            if (!ans || ans.isRevealed) return;
            
            ans.isRevealed = true;
            roundScore += ans.points; 
            correctSound.play(); 
            
            const slotElement = answersBoard.querySelector(`[data-index='${index}']`);
            if (slotElement) {
                slotElement.classList.add('revealed');
            }
            
            if (stealingMode) {
                // Ø¥Ø°Ø§ ØªÙ… Ø§Ù„ÙƒØ´Ù Ø¨Ù†Ø¬Ø§Ø­ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø±Ù‚Ø©ØŒ ÙŠØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©
                transferPoints(stealingTeam);
                stealingMode = false;
                stealPanel.classList.add('hidden');
                endRound();
                return; 
            }

            if (currentTurn !== 'none') {
                updateScoreDisplays();
                
                const answersInRound = currentQ.answers.slice(0, answersBoard.children.length);
                const allRevealed = answersInRound.every(a => a.isRevealed);
                
                if (allRevealed) {
                    transferPoints(currentTurn); 
                    endRound(); 
                }
            } else {
                updateScoreDisplays();
            }
        }

        function handleStrike() {
            // Ù…Ù†Ø·Ù‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø·Ø£ (X)
            
            if (currentTurn === 'none') {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¨Ø¹Ø¯ØŒ Ø§Ø¹ØªØ¨Ø±Ù‡Ø§ Ù…Ø¬Ø±Ø¯ Ø¶Ø±Ø¨Ø© ØªØ­Ø°ÙŠØ±ÙŠØ©
                strikes = 1; 
                flashStrike('âŒ'); 
                return; 
            }
            
            if (strikes >= MAX_STRIKES) return; 

            strikes++;
            flashStrike('âŒ'.repeat(strikes)); 

            updateScoreDisplays(); 
            
            if (strikes >= MAX_STRIKES) {
                initiateStealOpportunity();
            }
        }
        
        function initiateStealOpportunity() {
            // ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø±Ù‚Ø© (Ø¨Ø¹Ø¯ 3 Ø£Ø®Ø·Ø§Ø¡)
            stealingMode = true; 
            
            // ØªÙØ¹ÙŠÙ„ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ÙƒØ´ÙˆÙØ© Ù„Ù„Ø³Ø±Ù‚Ø©
            document.querySelectorAll('.answer-slot').forEach((slot, index) => {
                const currentQ = questions[currentQuestionIndex];
                if (index < currentQ.answers.length && !currentQ.answers[index].isRevealed) {
                    slot.style.pointerEvents = 'auto'; 
                } else {
                    slot.style.pointerEvents = 'none'; 
                }
            });

            nextStrikeBtn.disabled = true;
            revealAllBtn.disabled = true;

            stealingTeam = (currentTurn === 'red') ? 'blue' : 'red';
            const stealingTeamName = (stealingTeam === 'red') ? 'Ø§Ù„Ø£Ø­Ù…Ø±' : 'Ø§Ù„Ø£Ø²Ø±Ù‚';

            stealingTeamNameElement.textContent = stealingTeamName;
            stealPanel.classList.remove('hidden');
            updateScoreDisplays(); 
        }

        function resolveStealFail() {
            // ÙØ´Ù„ Ø§Ù„Ø³Ø±Ù‚Ø© (Ø¹Ø¨Ø± Ø²Ø± "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©")
            stealingMode = false;
            stealPanel.classList.add('hidden');
            
            flashStrike('âŒ');
            
            // Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø© ØªØ°Ù‡Ø¨ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† ÙŠÙ„Ø¹Ø¨ Ø£ÙˆÙ„Ø§Ù‹
            setTimeout(() => {
                transferPoints(currentTurn); 
                endRound(); 
            }, 500); 
        }

        function endRound() {
            // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ù…Ø§ ØªØ¨Ù‚Ù‰ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§Øª
            stealingMode = false; 
            
            // ÙƒØ´Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©
            questions[currentQuestionIndex].answers.forEach((ans, index) => {
                const slotElement = answersBoard.querySelector(`[data-index='${index}']`);
                if (slotElement && !ans.isRevealed) {
                   slotElement.classList.add('revealed');
                }
            });
            
            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
            document.querySelectorAll('.answer-slot').forEach(slot => {
                slot.style.pointerEvents = 'none';
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬ÙˆÙ„Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
            nextStrikeBtn.classList.add('hidden');
            revealAllBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
            
            currentTurn = 'none'; 
            updateScoreDisplays(); 
        }
        
        function transferPoints(team) {
            // ØªØ­ÙˆÙŠÙ„ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø© (roundScore) Ø¥Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„ÙØ§Ø¦Ø²
            if (roundScore === 0) return;

            if (team === 'red') {
                scoreRed += roundScore;
            } else if (team === 'blue') {
                scoreBlue += roundScore;
            }
            roundScore = 0; 
            updateScoreDisplays();
        }

        function goToNextIntermission() {
            currentQuestionIndex++;
            showIntermissionScreen();
        }

        function endGame() {
            // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
            showScreen(endScreen);
            
            const endMessage = document.getElementById('end-message');

            document.getElementById('final-score-red').textContent = scoreRed;
            document.getElementById('final-score-blue').textContent = scoreBlue;

            if (scoreRed > scoreBlue) {
                endMessage.textContent = 'ğŸ† ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø± Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø²! ğŸ†';
            } else if (scoreBlue > scoreRed) {
                endMessage.textContent = 'ğŸ† ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚ Ù‡Ùˆ Ø§Ù„ÙØ§Ø¦Ø²! ğŸ†';
            } else {
                endMessage.textContent = 'ØªØ¹Ø§Ø¯Ù„! ÙƒØ§Ù†Øª Ù…Ù†Ø§ÙØ³Ø© Ø­Ø§Ù…ÙŠØ© Ø§Ù„ÙˆØ·ÙŠØ³! ğŸ¤';
            }
        }

        function restartGame() {
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
            updateScoreDisplays();
            showScreen(startScreen);
        }


        // =========================================================
        // SECTION 10: Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event Listeners)
        // =========================================================

        document.addEventListener('DOMContentLoaded', () => {
            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø´Ø§Ø´Ø§Øª
            document.getElementById('start-game-btn').addEventListener('click', initGame);
            document.getElementById('next-round-btn').addEventListener('click', prepareQuestion);
            document.getElementById('next-question-btn').addEventListener('click', goToNextIntermission);
            document.getElementById('restart-game-btn').addEventListener('click', restartGame);

            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬ÙˆÙ„Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ…
            document.getElementById('start-red-btn').addEventListener('click', () => loadQuestion('red'));
            document.getElementById('start-blue-btn').addEventListener('click', () => loadQuestion('blue'));
            document.getElementById('next-strike-btn').addEventListener('click', handleStrike);
            document.getElementById('reveal-all-btn').addEventListener('click', endRound);
            
            // Ø²Ø± Ø§Ù„Ø³Ø±Ù‚Ø©
            document.getElementById('steal-fail-btn').addEventListener('click', resolveStealFail); 

            // Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            updateScoreDisplays();
            showScreen(startScreen);
        });

    </script>
</body>
</html>
